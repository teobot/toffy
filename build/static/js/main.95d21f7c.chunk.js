(this["webpackJsonptournament-frontend"]=this["webpackJsonptournament-frontend"]||[]).push([[0],{176:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n(0),r=n.n(c),i=n(46),s=n.n(i),o=n(14),l=n(92),d=(n(175),n(176),n(230)),j=n(226),u=n(225),h=n(208),b=n(12),O=n(13),p=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,null,[{key:"getStorage",value:function(e){return localStorage.getItem(e)}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"checkInStorage",value:function(e){return!!localStorage.getItem(e)}},{key:"deleteStorage",value:function(e){localStorage.removeItem(e)}}]),e}(),x=n(134),g=n.n(x),m=function(){var e=g.a.create({baseURL:"https://api-toffy.herokuapp.com",timeout:5e3}),t=p.getStorage("@token");return t&&(e.defaults.headers.common["X-Authorization"]=t),delete e.defaults.headers.common.Accept,e}(),f=Object(c.createContext)(),y=n(1);function v(e){e.routes;var t=Object(o.f)(),n=Object(c.useContext)(f),a=n.UserLoggedIn,r=n.handleLogout,i=(n.token,n.username),s=n.user_id;return Object(y.jsx)("div",{id:"navbar",children:Object(y.jsx)(d.a,{inverted:!0,clearing:!0,padded:!0,style:{borderRadius:0},children:Object(y.jsxs)(j.a,{inverted:!0,children:[Object(y.jsx)(j.a.Item,{onClick:function(){t.push(a?"/home":"/")},children:Object(y.jsx)("img",{alt:"company logo",src:"https://react.semantic-ui.com/logo.png"})}),Object(y.jsx)(y.Fragment,{}),a?Object(y.jsx)(u.a,{item:!0,text:i,className:"right",children:Object(y.jsxs)(u.a.Menu,{children:[Object(y.jsx)(u.a.Item,{onClick:function(){t.push("/u/".concat(s))},text:"Profile"}),Object(y.jsx)(u.a.Divider,{}),Object(y.jsx)(u.a.Item,{onClick:function(){a?(r(),t.push("/")):t.push("/login")},text:"Logout"})]})}):Object(y.jsxs)(j.a.Menu,{position:"right",children:[Object(y.jsx)(j.a.Item,{onClick:function(){t.push("/login")},link:!0,name:"Login"}),Object(y.jsx)(j.a.Item,{children:Object(y.jsx)(h.a,{onClick:function(){t.push("/create/account")},color:"orange",compact:!0,size:"tiny",children:"SIGN UP"})})]})]})})})}var w=n(222),C=n(7),k=n(10),S=n.n(k),_=n(17),T=n(231),z=n(221),I=n(232),N=n(223),A=n(70),R=(n(203),Object(c.createContext)()),L=Object(c.createContext)(),E=function(){var e=function(){var e=Object(c.useState)(window.innerWidth),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(window.innerHeight),s=Object(a.a)(i,2),o=s[0],l=s[1],d=function(){l(window.innerHeight),r(window.innerWidth)};return Object(c.useEffect)((function(){return window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[]),{windowWidth:n,windowHeight:o}}();return[{windowWidth:e.windowWidth,windowHeight:e.windowHeight}]},M=n.p+"static/media/widescreen-020.09fe2cf5.jpg";function P(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),s=Object(a.a)(i,2),l=s[0],d=s[1],j=Object(c.useState)(150),u=Object(a.a)(j,2),b=u[0],O=u[1],p=Object(o.f)(),x=Object(c.useContext)(f).handleUserLogin,g=Object(c.useContext)(R).showToast,v=Object(c.useContext)(L),k=v.windowWidth,A=v.windowHeight;Object(c.useEffect)((function(){m.defaults.headers.common["X-Authorization"]&&p.push("/home"),O(document.getElementById("navbar").clientHeight+50)}),[]);var E=function(){var e=Object(_.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.post("/signin",{email:n,password:l});case 3:t=e.sent,x(t.data),g("success","Log in successful."),p.push("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),g("error",e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),P={backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"".concat(k>650?"center":"top"," center")};return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(T.a,{children:Object(y.jsxs)(T.a.Row,{children:[Object(y.jsx)(T.a.Column,{computer:6,largeScreen:6,mobile:16,widescreen:6,tablet:6,width:6,children:Object(y.jsx)("div",{style:Object(C.a)(Object(C.a)({width:"100%",height:"100%",backgroundColor:"lavender",display:"flex",minHeight:k>650?A-b:A/4},P),{},{backgroundImage:"url(".concat(M,")")}),className:"fade-image"})}),Object(y.jsx)(T.a.Column,{computer:10,largeScreen:10,mobile:16,widescreen:10,tablet:10,width:10,children:Object(y.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:Object(y.jsxs)(z.a,{text:!0,style:{padding:"0px ".concat(k/15,"px")},children:[Object(y.jsx)(I.a,{inverted:!0,style:{fontSize:16+k/60},children:Object(y.jsxs)(I.a.Content,{children:["Log in",Object(y.jsx)(I.a.Subheader,{children:"Welcome back! Please enter your details below."})]})}),Object(y.jsx)(w.a,{section:!0}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Email",onChange:function(e){r(e.target.value)},value:n,className:"settingInput",fluid:!0})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Password",onChange:function(e){d(e.target.value)},value:l,className:"settingInput",fluid:!0,type:"password"})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)("a",{href:"/create/account",children:"Don't have a account?"})}),Object(y.jsx)(w.a,{section:k>650}),Object(y.jsx)(h.a,{size:k>650?"huge":"large",fluid:!0,onClick:E,color:"orange",children:"Login"})]})]})})})]})})})}var D=n.p+"static/media/widescreen-021.7c2ef7bb.jpg",W=n(160),H=n(69),U=n(96),F="Leaderboard",B="Single Elimination",G="Joining",X="Playing",J="Ended",q=["https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-001.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-003.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-002.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-004.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-005.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-006.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-007.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-008.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-009.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-010.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-011.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-012.jpg","https://raw.githubusercontent.com/teobot/toffy-bucket/main/profle-image-013.jpg"],Y=n(204),K=n(205),V=n(206),Q=function(e){return Y.extend(K),Y(e).fromNow()};function Z(e){var t,n=e.history,r=e.result,i=Object(c.useContext)(L),s=i.windowWidth,o=(i.windowHeight,Object(c.useState)(!1)),l=Object(a.a)(o,2),j=l[0],u=l[1];return Object(y.jsx)("div",{style:{backgroundColor:"#4a4c52",marginBottom:3,borderRadius:3,cursor:"pointer"},onClick:function(){n.push("/tournament/".concat(r._id))},onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)},children:Object(y.jsx)(d.a,{basic:!0,inverted:j,floated:!0,style:{position:"relative"},children:Object(y.jsxs)(I.a,{inverted:!0,children:[Object(y.jsx)(W.a,{circular:!0,src:r.creator.profile_pic}),Object(y.jsxs)(I.a.Content,{children:[Object(y.jsx)("span",{style:{fontSize:14,fontWeight:600},className:"text-shadow",children:r.title}),Object(y.jsxs)("div",{style:Object(C.a)({},s>650?{position:"absolute",right:14,top:14}:{padding:"3px 0px"}),children:[Object(y.jsxs)("span",{style:{fontSize:12,color:"lightgrey"},children:[Object(y.jsx)(H.a,{name:"user",style:{marginRight:2}})," ",r.players]}),Object(y.jsx)(U.a,{color:"black",size:"tiny",children:(t=r.created,Y.extend(V),Y().calendar(Y(t),{sameDay:"[Today, ] H:mm",nextDay:"MMM DD [,] H:mm",nextWeek:"MMM DD [,] H:mm",lastDay:"MMM DD [,] H:mm",lastWeek:"MMM DD [,] H:mm",sameElse:"MMM DD H:mm"}))})]}),Object(y.jsxs)(I.a.Subheader,{style:{fontSize:12},children:[r.type," - ",r.state]})]})]})})})}function $(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(o.f)(),s=Object(c.useContext)(L),l=s.windowWidth,j=s.windowHeight,u=Object(c.useContext)(R).showToast;Object(c.useEffect)((function(){b()}),[]);var b=function(){var e=Object(_.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/find");case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u("error","Failed to retrieve data, please try again later");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=Object(y.jsx)(T.a.Column,{computer:5,largeScreen:5,mobile:16,widescreen:5,tablet:5,width:5,children:Object(y.jsxs)(d.a.Group,{children:[Object(y.jsx)(d.a,{inverted:!0,children:"All"}),Object(y.jsx)(d.a,{inverted:!0,children:"Joining"}),Object(y.jsx)(d.a,{inverted:!0,children:"In Progress"}),Object(y.jsx)(d.a,{inverted:!0,children:"Ended"})]})});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{style:{padding:0,margin:0,position:"relative"},children:[Object(y.jsx)("div",{className:"image-back fade-image",style:{backgroundImage:"url(".concat(D,")"),height:j/4,width:"100%"}}),Object(y.jsx)(h.a,{color:"orange",style:{position:"absolute",top:j/10,right:50},as:"a",href:"/create/tournament",size:"big",children:"CREATE TOURNAMENT"})]}),Object(y.jsx)(w.a,{hidden:!0,section:!0}),Object(y.jsx)(T.a,{container:!0,padded:"vertically",stackable:!0,inverted:!0,children:Object(y.jsxs)(T.a.Row,{children:[l<=768?O:null,Object(y.jsx)(T.a.Column,{computer:11,largeScreen:11,mobile:16,widescreen:11,tablet:11,width:11,children:n?Object(y.jsx)(d.a.Group,{children:n.map((function(e,t){return Object(y.jsx)(Z,{result:e,history:i})}))}):Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsx)(I.a,{inverted:!0,children:Object(y.jsx)(I.a.Content,{children:"No Results"})})})}),l>768?O:null]})})]})}var ee=n.p+"static/media/widescreen-014.48b3ea3d.jpg",te=n.p+"static/media/widescreen-015.bb72348b.jpg",ne=n.p+"static/media/widescreen-016.b6148536.jpg",ae=n.p+"static/media/widescreen-017.d0047840.jpg",ce=n.p+"static/media/widescreen-018.3a9b6e27.jpg";function re(){var e=Object(c.useContext)(L),t=e.windowWidth,n=e.windowHeight,r=Object(c.useState)(null),i=Object(a.a)(r,2),s=i[0],o=i[1],l={backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center"},j=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=function(){var e=Object(_.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/stat/user");case 3:t=e.sent,o(t.data),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,j(2e4);case 11:u();case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){u()}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{style:Object(C.a)(Object(C.a)({width:"100%",height:.7*n,backgroundImage:"url(".concat(ee,")")},l),{},{display:"flex",justifyContent:"center",alignItems:"center"}),children:Object(y.jsx)(d.a,{basic:!0,textAlign:"center",children:Object(y.jsxs)(I.a,{style:{fontSize:45+t/40,textShadow:"3px 1px black"},inverted:!0,children:[Object(y.jsx)(W.a,{circular:!0,src:"https://react.semantic-ui.com/logo.png"}),Object(y.jsxs)(I.a.Content,{children:["Toffy",Object(y.jsx)(I.a.Subheader,{style:{color:"orange",fontSize:18+t/400,fontWeight:900},children:"tournaments made simple"})]})]})})}),Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsx)(T.a,{style:{padding:"30px 0px"},stretched:!0,children:Object(y.jsx)(T.a.Row,{stretched:!0,children:[{title:"Total tournaments organized",value:s?s.tournament_count:"..."},{title:"Users Signed Up",value:s?s.user_count:"..."},{title:"Total Matches Played",value:s?s.matches_count:"..."},{title:"Total Rounds Played",value:s?s.round_count:"..."}].map((function(e){return Object(y.jsx)(T.a.Column,{computer:4,largeScreen:4,widescreen:4,tablet:8,mobile:16,children:Object(y.jsxs)(d.a,{basic:!0,textAlign:"center",style:{padding:"25px 0px"},children:[Object(y.jsx)(I.a,{inverted:!0,style:{fontSize:42},children:e.value}),Object(y.jsx)(I.a.Subheader,{style:{color:"grey"},children:e.title})]})})}))})})}),Object(y.jsx)(T.a,{children:[{image:te,headerContent:Object(y.jsxs)(I.a.Content,{children:["Elo Scoring",Object(y.jsx)(I.a.Subheader,{children:"Each player is ranked using the ELO system, making tournaments fairer with less effort."})]})},{image:ne,headerContent:Object(y.jsxs)(I.a.Content,{children:["Multiple Types",Object(y.jsx)(I.a.Subheader,{children:"Toffy includes a range of different tournament types, including single elimination and leaderboards."})]})},{image:ae,headerContent:Object(y.jsxs)(I.a.Content,{children:["Super simple UI",Object(y.jsx)(I.a.Subheader,{children:"The simple UI delivers all the information you need and nothing else."})]})}].map((function(e,t){var n=Object(y.jsx)(T.a.Column,{computer:8,largeScreen:8,widescreen:8,tablet:8,mobile:16,children:Object(y.jsx)(W.a,{src:e.image,fluid:!0})});return Object(y.jsxs)(T.a.Row,{stretched:!0,children:[t%2!==0?n:null,Object(y.jsx)(T.a.Column,{computer:8,largeScreen:8,widescreen:8,tablet:8,mobile:16,children:Object(y.jsx)(d.a,{padded:!0,basic:!0,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(y.jsx)(I.a,{inverted:!0,size:"large",textAlign:"center",children:e.headerContent})})}),t%2===0?n:null]})}))}),Object(y.jsx)("div",{style:Object(C.a)(Object(C.a)({width:"100%",height:.4*n,backgroundColor:"lightblue",backgroundImage:"url(".concat(ce,")")},l),{},{display:"flex",justifyContent:"center",alignItems:"center",marginTop:25}),children:Object(y.jsx)(d.a,{basic:!0,textAlign:"center",children:Object(y.jsx)(I.a,{style:{fontSize:25+t/40,textShadow:"3px 1px black"},inverted:!0,children:Object(y.jsxs)(I.a.Content,{children:["Join Today",Object(y.jsx)(I.a.Subheader,{style:{color:"orange",fontSize:18+t/400,fontWeight:900},children:Object(y.jsx)(h.a,{as:"a",href:"/create/account",color:"orange",compact:!0,size:"large",children:"FREE SIGN UP"})})]})})})})]})}var ie=n.p+"static/media/widescreen-019.356ab4f2.jpg",se=function(e,t){switch(t.type){case"change_username":return Object(C.a)(Object(C.a)({},e),{},{username:t.payload});case"change_firstname":return Object(C.a)(Object(C.a)({},e),{},{firstname:t.payload});case"change_lastname":return Object(C.a)(Object(C.a)({},e),{},{lastname:t.payload});case"change_email":return Object(C.a)(Object(C.a)({},e),{},{email:t.payload});case"change_password":return Object(C.a)(Object(C.a)({},e),{},{password:t.payload});default:return e}};function oe(){var e=Object(c.useReducer)(se,{username:"",firstname:"",lastname:"",email:"",password:""}),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(150),s=Object(a.a)(i,2),l=s[0],d=s[1],j=Object(o.f)(),u=Object(c.useContext)(f).handleUserLogin,b=Object(c.useContext)(R).showToast,O=Object(c.useContext)(L),p=O.windowWidth,x=O.windowHeight;Object(c.useEffect)((function(){m.defaults.headers.common["X-Authorization"]&&j.push("/home"),d(document.getElementById("navbar").clientHeight+50)}),[]);var g=function(){var e=Object(_.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.post("/signup",n);case 3:t=e.sent,u(t.data),j.push("/home"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),b("error",e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(e,t){r({type:t,payload:e.target.value})},k={backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"".concat(p>650?"center":"top"," center")};return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(T.a,{children:Object(y.jsxs)(T.a.Row,{children:[Object(y.jsx)(T.a.Column,{computer:6,largeScreen:6,mobile:16,widescreen:6,tablet:6,width:6,children:Object(y.jsx)("div",{style:Object(C.a)(Object(C.a)({width:"100%",height:"100%",backgroundColor:"lavender",display:"flex",minHeight:p>650?x-l:x/4},k),{},{backgroundImage:"url(".concat(ie,")")}),className:"fade-image"})}),Object(y.jsx)(T.a.Column,{computer:10,largeScreen:10,mobile:16,widescreen:10,tablet:10,width:10,children:Object(y.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},children:Object(y.jsxs)(z.a,{text:!0,style:{padding:"0px ".concat(p/15,"px")},children:[Object(y.jsx)(I.a,{inverted:!0,style:{fontSize:16+p/60},children:Object(y.jsxs)(I.a.Content,{children:["Sign Up",Object(y.jsx)(I.a.Subheader,{children:"Get started today, by entering you details below."})]})}),Object(y.jsx)(w.a,{section:!0}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Username",onChange:function(e){v(e,"change_username")},value:n.username,className:"settingInput",fluid:!0})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Firstname",onChange:function(e){v(e,"change_firstname")},value:n.firstname,className:"settingInput",fluid:!0})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Lastname",onChange:function(e){v(e,"change_lastname")},value:n.lastname,className:"settingInput",fluid:!0})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Email",onChange:function(e){v(e,"change_email")},value:n.email,className:"settingInput",fluid:!0})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{placeholder:"Password",onChange:function(e){v(e,"change_password")},value:n.password,className:"settingInput",fluid:!0,type:"password"})}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)("div",{children:Object(y.jsx)("a",{href:"/login",children:"Already have a account?"})}),Object(y.jsx)(w.a,{section:p>650}),Object(y.jsx)(h.a,{size:p>650?"huge":"large",fluid:!0,onClick:g,color:"orange",children:"CREATE ACCOUNT"})]})]})})})]})})})}var le=n(19);function de(e){var t=e.tournamentData,n=e.getTournamentData,a=t.players,r=t.state,i=t._id,s=Object(c.useContext)(f).user_id,o=Object(c.useContext)(R).showToast,l=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.post("/tournament/".concat(i,"/join"));case 3:return e.sent,e.next=6,n();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o("error","Failed to join tournament.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.delete("/tournament/".concat(i,"/leave"));case 3:return e.sent,e.next=6,n();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o("error","Failed to leave tournament.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return"Joining"===r?function(){for(var e=0;e<a.length;e++)if(a[e]._id===s)return!0}()?Object(y.jsx)(h.a,{negative:!0,onClick:d,children:"Leave"}):Object(y.jsx)(h.a,{positive:!0,onClick:l,children:"Join"}):null}var je=n(227),ue=n(224);function he(e){var t=e.tournament,n=e.getTournamentData,r=Object(c.useState)(t.title),i=Object(a.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)(!1),j=Object(a.a)(l,2),u=j[0],b=j[1],O=Object(c.useState)(t.description),p=Object(a.a)(O,2),x=p[0],g=p[1],f=Object(c.useContext)(R).showToast,v=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.post("/tournament/".concat(t._id,"/progress"));case 3:return e.sent,e.next=6,n();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("error","Tournament progression failed.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(_.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),a=Object(C.a)(Object(C.a)({},s?{title:s}:null),x?{description:x}:null),e.prev=2,e.next=5,m.patch("/tournament/".concat(t._id),a);case 5:return e.next=7,n();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),f("error","Failed update, try again later.");case 12:b(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(d.a.Group,{children:[Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsx)(I.a,{style:{color:"lightgrey"},as:"h2",children:Object(y.jsxs)(I.a.Content,{children:["Settings",Object(y.jsx)(I.a.Subheader,{style:{color:"lightgrey"},children:"Manage aspects of the tournament."})]})})}),Object(y.jsx)(w.a,{}),Object(y.jsxs)(d.a.Group,{horizontal:!0,children:[Object(y.jsxs)(d.a,{basic:!0,children:[Object(y.jsxs)("div",{style:{marginBottom:15,padding:5},children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Tournament title"})}),Object(y.jsx)(N.a,{onChange:function(e,t){o(t.value)},fluid:!0,value:s,className:"settingInput"}),Object(y.jsx)("div",{className:"settingLabel",children:"remember to keep the tournament title simple and searchable, don't include any bad words :("})]}),Object(y.jsxs)("div",{style:{marginBottom:15,padding:5},children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Tournament Description"})}),Object(y.jsx)(je.a,{children:Object(y.jsx)(ue.a,{rows:x.split("\n").length>10?11:x.split("\n").length+1,onChange:function(e,t){g(t.value)},value:x,className:"settingTextArea"})}),Object(y.jsx)("div",{className:"settingLabel",children:"describe your tournament and include any rules that players might need to read"})]}),Object(y.jsxs)("div",{style:{marginBottom:15,padding:5},children:[Object(y.jsx)(h.a,{onClick:k,primary:!0,loading:u,children:"Update Tournament"}),Object(y.jsx)("div",{className:"settingLabel",children:"update any changes to the tournament title or description"})]}),Object(y.jsx)(w.a,{section:!0}),Object(y.jsxs)("div",{style:{marginBottom:15,padding:5},children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Tournament Progression"})}),Object(y.jsx)(h.a,{onClick:v,disabled:t.state===J,color:t.state===G?"green":t.state===X?"red":"",children:t.state===G?"Start Tournament":t.state===X?"End Tournament":"Tournament Finished"}),Object(y.jsx)("div",{className:"settingLabel",children:"you can progress the tournament here"})]})]}),Object(y.jsx)(d.a,{})]})]})}var be=n(229),Oe=n(138);function pe(e){var t=e.ThisX,n=e.ThisY,a=(e.matchId,e.playerData),r=e.width,i=e.height,s=e.winner,o=(Object(c.useContext)(fe).isAdmin,a.score),l=a.player;return Object(y.jsxs)("g",{children:[Object(y.jsx)("rect",{x:t,y:n,width:r,height:i/2,style:{fill:"#58595e"}}),Object(y.jsx)("text",{style:{fontSize:14,fontWeight:"bold",fill:"white",filter:"drop-shadow( 3px 3px 2px rgba(0, 0, 0, .7))"},x:t+10,y:n+20,children:l?l.username:null}),s?Object(y.jsxs)("g",{children:[Object(y.jsx)("rect",{x:t+r-35,y:n,width:35,height:i/2,style:{fill:s._id===l._id?"#ff741f":"#77777f"}}),Object(y.jsx)("text",{style:{fontSize:14,fontWeight:"normal",fill:"black",filter:"drop-shadow( 1px 1px 1px rgba(0, 0, 0, .7))"},x:t+r-(17+4*"".concat(l?o:"").toString().length),y:n+i/3,children:l?o:null})]}):null]})}function xe(e){var t=e.height,n=e.width,a=e.x,c=e.y,r=e.color,i=e.onClick;return Object(y.jsxs)("svg",{onClick:i,x:a,y:c,height:"".concat(t,"pt"),viewBox:"0 -1 401.52289 401",width:"".concat(n,"pt"),style:{fill:r,filter:"drop-shadow( 5px 5px 5px rgba(0, 0, 0, 1))"},children:[Object(y.jsx)("path",{d:"m370.589844 250.972656c-5.523438 0-10 4.476563-10 10v88.789063c-.019532 16.5625-13.4375 29.984375-30 30h-280.589844c-16.5625-.015625-29.980469-13.4375-30-30v-260.589844c.019531-16.558594 13.4375-29.980469 30-30h88.789062c5.523438 0 10-4.476563 10-10 0-5.519531-4.476562-10-10-10h-88.789062c-27.601562.03125-49.96875 22.398437-50 50v260.59375c.03125 27.601563 22.398438 49.96875 50 50h280.589844c27.601562-.03125 49.96875-22.398437 50-50v-88.792969c0-5.523437-4.476563-10-10-10zm0 0"}),Object(y.jsx)("path",{d:"m376.628906 13.441406c-17.574218-17.574218-46.066406-17.574218-63.640625 0l-178.40625 178.40625c-1.222656 1.222656-2.105469 2.738282-2.566406 4.402344l-23.460937 84.699219c-.964844 3.472656.015624 7.191406 2.5625 9.742187 2.550781 2.546875 6.269531 3.527344 9.742187 2.566406l84.699219-23.464843c1.664062-.460938 3.179687-1.34375 4.402344-2.566407l178.402343-178.410156c17.546875-17.585937 17.546875-46.054687 0-63.640625zm-220.257812 184.90625 146.011718-146.015625 47.089844 47.089844-146.015625 146.015625zm-9.40625 18.875 37.621094 37.625-52.039063 14.417969zm227.257812-142.546875-10.605468 10.605469-47.09375-47.09375 10.609374-10.605469c9.761719-9.761719 25.589844-9.761719 35.351563 0l11.738281 11.734375c9.746094 9.773438 9.746094 25.589844 0 35.359375zm0 0"})]})}function ge(e){var t=e.ThisX,n=e.ThisY,a=e.match,r=e.width,i=e.height,s=Object(c.useContext)(fe),o=s.isAdmin,l=s.changeSelectedMatch,d=s.inProgress,j=!a.winner&&o&&a.player1.player&&a.player2.player&&d;return Object(y.jsxs)("g",{children:[Object(y.jsx)(pe,{width:r,height:i,ThisX:t,ThisY:n,winner:a.winner,playerData:a.player1,matchId:a.match_id}),Object(y.jsx)(pe,{width:r,height:i,ThisX:t,ThisY:n+i/2,winner:a.winner,playerData:a.player2,matchId:a.match_id}),Object(y.jsx)("polyline",{points:"\n          ".concat(t,",").concat(n+30," \n          ").concat("".concat(j?t+.75*r:t+r),",").concat(n+30,"\n        "),style:{fill:"none",stroke:"black",strokeWidth:1}}),j?Object(y.jsxs)("g",{children:[Object(y.jsx)("rect",{"pointer-events":"visible",style:{fill:"none"},onClick:function(){l(a)},height:34,width:35,x:t+r-43,y:n+14}),Object(y.jsx)(xe,{color:"#2a303f",height:22,width:22,x:t+r-40,y:n+15})]}):null,null]})}function me(e){var t=e.roundData,n=e.roundIndex,a=e.tournamentMatchData,c={fill:"none",stroke:"white",strokeWidth:4},r=60,i=225;return Object(y.jsx)("g",{children:t.matches.map((function(e,s){var o=305*n,l=15*Math.pow(2,t.round+2),d=r*((Math.pow(2,t.round)-2)/2)+l*s;return Object(y.jsxs)("g",{children:[Object(y.jsx)(ge,{width:i,height:r,match:e,ThisX:o,ThisY:d}),s%2===0&&t.round!==a.length?Object(y.jsx)("polyline",{points:"\n                    ".concat(o+i+5,",").concat(d+30," \n                    ").concat(o+i+40,",").concat(d+30," \n                    ").concat(o+i+40,",").concat(d+1*l+30," \n                    ").concat(o+i+5,",").concat(d+1*l+30,"\n                "),style:c}):null,1!==t.round?Object(y.jsx)("polyline",{points:"\n                    ".concat(o-5,",").concat(d+30," \n                    ").concat(o-40,",").concat(d+30,"\n                "),style:c}):null]})}))})}var fe=Object(c.createContext)(),ye=function(e,t){switch(t.type){case"change_player1Selected":return Object(C.a)(Object(C.a)({},e),{},{player1Selected:!0,player2Selected:!1});case"change_player2Selected":return Object(C.a)(Object(C.a)({},e),{},{player2Selected:!0,player1Selected:!1});case"change_player1Score":return Object(C.a)(Object(C.a)({},e),{},{player1Score:t.payload});case"change_player2Score":return Object(C.a)(Object(C.a)({},e),{},{player2Score:t.payload});case"reset":return{player1Selected:!1,player2Selected:!1,player1Score:0,player2Score:0};default:return e}};function ve(e){var t=e.match_data,n=e.isAdmin,r=e.tournament_id,i=e.getTournamentData,s=e.inProgress,o=Object(c.useRef)(null),l=Object(c.useContext)(L).windowHeight,d=Object(c.useContext)(R).showToast,j=Object(c.useReducer)(ye,{player1Selected:!1,player2Selected:!1,player1Score:0,player2Score:0}),u=Object(a.a)(j,2),b=u[0],O=u[1],p=Object(c.useState)(!1),x=Object(a.a)(p,2),g=x[0],f=x[1],v=Object(c.useState)(null),C=Object(a.a)(v,2),k=C[0],z=C[1],A=function(e,t){O({type:"change_".concat(t.name),payload:parseInt(t.value)})},E=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.patch("/tournament/".concat(r,"/match/").concat(k._id),{winner:b.player1Selected?"player1":b.player2Selected?"player2":null,scores:{player1:b.player1Score,player2:b.player2Score}});case 3:return e.sent,f(!1),d("success","Match updated."),e.next=8,i();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d("error","Match update failed, try again later.");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o.current.zoom(150,150,.7)}),[]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(fe.Provider,{value:{isAdmin:n,inProgress:s,changeSelectedMatch:function(e){z(e),f(!0)}},children:Object(y.jsx)(Oe.b,{background:"#24262e",SVGBackground:"#24262e",tool:Oe.a,ref:o,width:"100%",height:l/2,detectAutoPan:!1,customMiniature:function(){return null},customToolbar:function(){return null},children:Object(y.jsx)("svg",{children:t.map((function(e,n){return Object(y.jsx)(me,{roundData:e,roundIndex:n,tournamentMatchData:t})}))})})}),Object(y.jsxs)(be.a,{onClose:function(){O({type:"reset"}),f(!1)},onOpen:function(){return f(!0)},open:g,children:[Object(y.jsx)(be.a.Header,{children:"Edit Match Details"}),k?Object(y.jsxs)(be.a.Content,{children:[Object(y.jsx)(I.a,{textAlign:"center",size:"huge",children:"Who won?"}),Object(y.jsxs)(T.a,{stretched:!0,children:[Object(y.jsxs)(T.a.Row,{columns:"equal",stretched:!0,children:[Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(h.a,{positive:b.player1Selected,onClick:function(){O({type:"change_player1Selected"})},children:k.player1.player.username})}),Object(y.jsx)(T.a.Column,{width:2}),Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(h.a,{positive:b.player2Selected,onClick:function(){O({type:"change_player2Selected"})},children:k.player2.player.username})})]}),Object(y.jsx)(w.a,{}),Object(y.jsxs)(T.a.Row,{columns:"equal",stretched:!0,children:[Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(N.a,{fluid:!0,label:"Player 1 Score",type:"number",name:"player1Score",value:b.player1Score,onChange:A})}),Object(y.jsx)(T.a.Column,{width:2}),Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(N.a,{fluid:!0,label:"Player 2 Score",type:"number",min:0,max:9999,name:"player2Score",value:b.player2Score,onChange:A,labelPosition:"right"})})]})]})]}):null,Object(y.jsxs)(be.a.Actions,{children:[Object(y.jsx)(h.a,{negative:!0,onClick:function(){O({type:"reset"}),f(!1)},children:"Close"}),Object(y.jsx)(h.a,{disabled:!b.player2Selected&&!b.player1Selected,content:"Save Changes",labelPosition:"right",icon:"checkmark",onClick:E,positive:!0})]})]})]})}var we=n(18),Ce=n(228);function ke(e){var t=e.cell1,n=e.cell2,a=e.cell3,c=e.widths;return Object(y.jsxs)(Ce.a.Row,{children:[Object(y.jsx)(Ce.a.Cell,{textAlign:"center",width:c[0],children:t}),Object(y.jsx)(Ce.a.Cell,{width:c[1],children:n}),Object(y.jsx)(Ce.a.Cell,{textAlign:"center",width:c[2],children:a})]})}function Se(e){var t=e.player,n=e.score,r=e.index,i=e.tournament_id,s=Object(c.useState)(n),o=Object(a.a)(s,2),l=o[0],d=o[1],j=Object(c.useContext)(R).showToast,u=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.patch("/update/".concat(i,"/").concat(t._id),{score:l});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),j("error","Failed to save score, try again later."),d(n);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(ke,{widths:[1,9,6],cell1:r+1,cell2:Object(y.jsxs)(I.a,{as:"h4",image:!0,inverted:!0,children:[Object(y.jsx)(W.a,{src:t.profile_pic,rounded:!0,size:"mini"}),Object(y.jsxs)(I.a.Content,{children:[Object(y.jsx)("a",{href:"/u/".concat(t._id),children:t.username}),Object(y.jsxs)(I.a.Subheader,{children:["elo: ",t.elo]})]})]}),cell3:Object(y.jsx)(T.a,{stretched:!0,children:Object(y.jsxs)(T.a.Row,{stretched:!0,children:[Object(y.jsx)(T.a.Column,{width:10,children:Object(y.jsx)(N.a,{value:l,onChange:function(e,t){d(t.value)},className:"settingInput",fluid:!0})}),Object(y.jsx)(T.a.Column,{width:6,textAlign:"center",children:Object(y.jsxs)(h.a,{onClick:u,positive:!0,compact:!0,size:"small",children:[Object(y.jsx)(H.a,{name:"save"}),"Save"]})})]})})})}function _e(e){var t=e.match_data,n=e.isAdmin,a=e.tournament_id,c=e.getTournamentData,r=(e.inProgress,e.settings);return Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsxs)(Ce.a,{inverted:!0,striped:!0,columns:3,selectable:!0,children:[Object(y.jsx)(Ce.a.Header,{children:Object(y.jsxs)(Ce.a.Row,{textAlign:"center",children:[Object(y.jsx)(Ce.a.HeaderCell,{children:"Position"}),Object(y.jsx)(Ce.a.HeaderCell,{children:"Player"}),Object(y.jsx)(Ce.a.HeaderCell,{children:r.scoreTitle})]})}),Object(y.jsx)(Ce.a.Body,{children:Object(we.a)(t).sort((function(e,t){return e.score<t.score?-1:e.score>t.score?1:0})).map((function(e,t){var r=e.player,i=e.score;return n?Object(y.jsx)(Se,{index:t,tournament_id:a,player:r,score:i,getTournamentData:c}):Object(y.jsx)(ke,{widths:[2,9,5],cell1:t+1,cell2:Object(y.jsxs)(I.a,{as:"h4",image:!0,inverted:!0,children:[Object(y.jsx)(W.a,{src:r.profile_pic,rounded:!0,size:"mini"}),Object(y.jsxs)(I.a.Content,{children:[Object(y.jsx)("a",{href:"/u/".concat(r._id),children:r.username}),Object(y.jsxs)(I.a.Subheader,{children:["elo: ",r.elo]})]})]}),cell3:i||"No Score"})}))})]})})}function Te(e){var t=e.players,n=e.creator,a=Object(o.f)();return Object(y.jsxs)(y.Fragment,{children:[t.length<1?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w.a,{section:!0,hidden:!0}),Object(y.jsx)(d.a,{padded:!0,basic:!0,textAlign:"center",vertical:!0,children:Object(y.jsxs)(I.a,{as:"h1",icon:!0,inverted:!0,children:[Object(y.jsx)(H.a,{name:"group"}),"No Players Joined",Object(y.jsx)(I.a.Subheader,{children:"be the first to join.."})]})})]}):null,Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsx)(T.a,{stretched:!0,children:Object(we.a)(t).sort((function(e,t){return e.elo<t.elo?1:e.elo>t.elo?-1:0})).map((function(e){return Object(y.jsxs)(T.a.Row,{stretched:!0,verticalAlign:"middle",children:[Object(y.jsx)(T.a.Column,{width:1,children:Object(y.jsx)(W.a,{rounded:!0,src:e.profile_pic,fluid:!0})}),Object(y.jsx)(T.a.Column,{width:15,children:Object(y.jsxs)(I.a,{inverted:!0,as:"a",href:"",onClick:function(){a.push("/u/".concat(e._id))},children:[e.username," ",Object(y.jsxs)(U.a,{basic:!0,horizontal:!0,children:[Object(y.jsx)(H.a,{name:"gem"}),e.elo]}),n._id===e._id?Object(y.jsx)("small",{children:" - you \ud83d\udc4b"}):null]})})]})}))})})]})}function ze(e){var t=e.isAdmin,n=e._id,a=e.view;return Object(y.jsx)(j.a,{id:"tournamentMenu",pointing:!0,secondary:!0,inverted:!0,style:{fontSize:16,marginTop:15},children:[{name:"Bracket",view:void 0,icon:null},{name:"Players",view:"players",icon:null},t?{name:"Settings",view:"settings",icon:Object(y.jsx)(H.a,{size:"small",style:{color:"white"},name:"unlock"})}:null].map((function(e){return e?Object(y.jsx)(j.a.Item,{as:"a",href:"/tournament/".concat(n).concat(e.view?"/".concat(e.view):""),active:a===e.view,icon:e.icon?e.icon:null,name:e.name}):null}))})}function Ie(){var e=Object(o.h)(),t=e._id,n=e.view,r=Object(o.f)(),i=Object(c.useContext)(L),s=i.windowWidth,l=i.windowHeight,j=Object(c.useContext)(R).showToast,u=Object(c.useState)(null),h=Object(a.a)(u,2),b=h[0],O=h[1];Object(c.useEffect)((function(){k()}),[]);var p,x,g,f,v,C=function(e){return e===n},k=function(){var e=Object(_.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/tournament/".concat(t));case 3:n=e.sent,O(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j("error","Tournament doesn't exist."),r.push("/home");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?(b&&"settings"===n&&!b.isAdmin&&r.push("/tournament/".concat(t)),b?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{style:Object(le.a)({width:"100%",height:l/7,background:"rgb(235,212,217)"},"background","linear-gradient(90deg, rgba(235,212,217,1) 14%, rgba(245,111,235,1) 71%, rgba(255,0,254,1) 100%)")}),Object(y.jsxs)("div",{style:{backgroundColor:"#3d4351",padding:"20px 0px 0px 0px"},children:[Object(y.jsx)(z.a,{children:Object(y.jsx)(T.a,{doubling:!0,stackable:!0,children:Object(y.jsxs)(T.a.Row,{children:[Object(y.jsx)(T.a.Column,{width:13,children:Object(y.jsxs)(d.a.Group,{children:[Object(y.jsxs)(d.a.Group,{horizontal:!0,children:[Object(y.jsx)(d.a,{basic:!0,style:{backgroundColor:"transparent"},children:Object(y.jsx)(I.a,{as:"h1",inverted:!0,children:b.title})}),Object(y.jsx)(d.a,{basic:!0,style:{backgroundColor:"transparent"},textAlign:"right",children:Object(y.jsx)(de,{getTournamentData:k,tournamentData:b})})]}),Object(y.jsx)(d.a.Group,{horizontal:s>758,children:[{title:"".concat(b.players.length," Player").concat(1===b.players.length?"":"s"),icon:"user"},{title:b.type,icon:"trophy"},{title:(v=b.state,v===G?"Joinable":v===X?"In Progress":v===J?"Ended":void 0),icon:"game"},{title:(f=b.created,Y.extend(K),Y(f).format("MMMM DD, YYYY [at] hh:mm A")),icon:"calendar"}].map((function(e){return Object(y.jsx)(d.a,{basic:!0,textAlign:"left",children:Object(y.jsxs)(I.a,{inverted:!0,size:"tiny",children:[Object(y.jsx)(H.a,{size:"tiny",fitted:!0,name:e.icon}),Object(y.jsx)(I.a.Content,{style:{fontSize:12},children:e.title})]})})}))})]})}),Object(y.jsx)(T.a.Column,{width:3,children:Object(y.jsx)(d.a,{basic:!0,style:{display:"flex",height:"100%",alignItems:"center"},children:Object(y.jsxs)(I.a,{as:"h2",inverted:!0,textAlign:"left",children:[Object(y.jsx)(W.a,{circular:!0,src:b.creator.profile_pic}),Object(y.jsx)(I.a.Content,{children:Object(y.jsxs)(I.a.Subheader,{children:[Object(y.jsx)("div",{style:{color:"white",fontSize:14},children:"Organized by"}),Object(y.jsx)("a",{href:"/u/".concat(b.creator._id),style:{color:"orange",fontWeight:"900",textDecoration:"underline"},children:b.creator.username})]})})]})})})]})})}),Object(y.jsx)(z.a,{children:Object(y.jsx)(ze,{isAdmin:b.isAdmin,_id:t,view:n})})]}),Object(y.jsxs)(z.a,{children:[C("settings")&&b.isAdmin?Object(y.jsx)(he,{tournament:b,getTournamentData:k}):null,C(void 0)?(p=b.type,x=b.match_data,g=b.isAdmin,void 0===b.match_data||0===b.match_data.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w.a,{section:!0,hidden:!0}),Object(y.jsx)(d.a,{padded:!0,basic:!0,textAlign:"center",vertical:!0,children:Object(y.jsxs)(I.a,{as:"h1",icon:!0,inverted:!0,children:[Object(y.jsx)(H.a,{name:"trophy"}),"Match has not started",Object(y.jsx)(I.a.Subheader,{children:"Waiting for the admin to start."})]})})]}):p===B?Object(y.jsx)(ve,{getTournamentData:k,tournament_id:b._id,match_data:x,isAdmin:g,inProgress:b.state===X}):p===F?Object(y.jsx)(_e,{getTournamentData:k,tournament_id:b._id,match_data:x,isAdmin:g,settings:b.settings,inProgress:b.state===X}):null):null,C("players")?Object(y.jsx)(Te,{players:b.players,creator:b.creator}):null]})]}):Object(y.jsx)("div",{children:"Loading"})):Object(y.jsxs)("div",{children:["Please go back to ",Object(y.jsx)("a",{href:"/home",children:"home"})]})}var Ne=n(159);function Ae(e){var t=e.userData,n=(e.id,e.itemLeft),r=e.itemRight,i=e.centerItem,s=Object(c.createRef)(),o=Object(c.useState)(null),l=Object(a.a)(o,2),d=l[0],j=l[1];return Object(c.useEffect)((function(){if(s.current&&t){var e=s.current.getContext("2d"),a={labels:[n.title,r.title],datasets:[{label:"".concat(n.title,"/").concat(r.title),data:[n.value,r.value],backgroundColor:[n.color,r.color],hoverOffset:0}]},c={type:"doughnut",options:{plugins:{legend:{display:!1}},cutout:"80%"},data:a};d?(d.data=a,d.update()):j(new Ne.a(e,c))}}),[t]),Object(y.jsx)(T.a,{children:Object(y.jsxs)(T.a.Row,{columns:"equal",children:[Object(y.jsxs)(T.a.Column,{children:[Object(y.jsx)("canvas",{ref:s}),null!=i?Object(y.jsx)("div",{style:{textAlign:"center",position:"absolute",top:"50%",bottom:"50%",left:"50%",right:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{fontSize:30,padding:10,fontWeight:"bolder"},children:i.top}),Object(y.jsx)("div",{style:{fontSize:14,marginTop:2,color:"grey"},children:i.bottom})]})}):null]}),Object(y.jsx)(T.a.Column,{children:Object(y.jsx)("div",{style:{display:"flex",height:"100%",alignItems:"center",width:"100%"},children:Object(y.jsx)(T.a,{stretched:!0,style:{width:"100%"},children:Object(y.jsxs)(T.a.Row,{columns:"equal",stretched:!0,textAlign:"center",children:[Object(y.jsxs)(T.a.Column,{children:[Object(y.jsx)("div",{style:{color:n.color,fontSize:28,fontWeight:"bolder",padding:"10px 0"},children:n.value}),Object(y.jsx)("div",{style:{color:"grey"},children:n.title})]}),Object(y.jsxs)(T.a.Column,{children:[Object(y.jsx)("div",{style:{color:r.color,fontSize:28,fontWeight:"bolder",padding:"10px 0"},children:r.value}),Object(y.jsx)("div",{style:{color:"grey"},children:r.title})]})]})})})})]})})}function Re(){var e=Object(o.h)()._id,t=Object(c.useState)(null),n=Object(a.a)(t,2),r=n[0],i=n[1],s=Object(o.f)(),l=Object(c.useContext)(L).windowHeight,j=Object(c.useContext)(f).user_id,u=Object(c.useContext)(R).showToast;Object(c.useEffect)((function(){b()}),[e]);var b=function(){var t=Object(_.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/user/".concat(e));case 3:n=t.sent,i(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),u("error",t.t0.response.data.error),s.push("/home");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r?Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:Object(le.a)({width:"100%",height:l/5,background:"rgb(10,67,149)"},"background","linear-gradient(90deg, rgba(10,67,149,1) 0%, rgba(0,255,89,1) 100%)")}),Object(y.jsxs)(d.a,{basic:!0,className:"container",children:[Object(y.jsx)(T.a,{children:Object(y.jsxs)(T.a.Row,{children:[Object(y.jsx)(T.a.Column,{width:8,children:Object(y.jsxs)(I.a,{inverted:!0,size:"huge",children:[Object(y.jsx)(W.a,{circular:!0,src:r.profile_pic}),Object(y.jsxs)(I.a.Content,{children:[r.username,Object(y.jsxs)(I.a.Subheader,{children:["Joined ",Q(r.date_joined)," ",Object(y.jsxs)(U.a,{children:["Elo: ",r.elo]})]})]})]})}),Object(y.jsx)(T.a.Column,{width:8,children:r._id===j?Object(y.jsx)(h.a,{as:"a",href:"/u/".concat(e,"/edit"),primary:!0,floated:"right",children:"Edit Profile"}):Object(y.jsx)(h.a,{floated:"right",children:"Message"})})]})}),Object(y.jsx)(w.a,{section:!0,hidden:!0}),Object(y.jsxs)(T.a,{stackable:!0,doubling:!0,stretched:!0,children:[Object(y.jsx)(T.a.Row,{columns:"equal",children:Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(I.a,{inverted:!0,size:"large",children:"Overall Stats"})})}),Object(y.jsx)(T.a.Row,{stretched:!0,children:[{title:"Total tournaments organized",value:r.tournaments_organized},{title:"Total matches played",value:r.matches_played.length},{title:"Total tournaments participated",value:r.total_tournaments_played},{title:"Total matches won",value:r.matches_won}].map((function(e){return Object(y.jsx)(T.a.Column,{computer:4,largeScreen:4,widescreen:4,tablet:8,mobile:16,children:Object(y.jsxs)(d.a,{inverted:!0,padded:!0,textAlign:"center",children:[Object(y.jsx)(I.a,{inverted:!0,style:{fontSize:38},children:e.value}),Object(y.jsx)(I.a.Subheader,{style:{color:"grey"},children:e.title})]})})}))}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)(T.a.Row,{columns:"equal",children:Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(I.a,{inverted:!0,size:"large",children:"Games and Matches"})})}),Object(y.jsxs)(T.a.Row,{children:[Object(y.jsx)(T.a.Column,{width:8,children:Object(y.jsxs)("div",{children:[Object(y.jsx)(I.a,{inverted:!0,size:"medium",attached:"top",children:"Overall Win Rate"}),Object(y.jsx)(d.a,{inverted:!0,attached:!0,padded:!0,children:Object(y.jsx)(Ae,{userData:r,centerItem:{top:"".concat(100*r.win_percentage,"%"),bottom:"Win rate"},id:"matchesChartId",itemLeft:{title:"Wins",value:r.matches_won,color:"#3ec47b"},itemRight:{title:"Losses",value:r.matches_lost,color:"#f95b5c"}})})]})}),Object(y.jsx)(T.a.Column,{width:8,children:Object(y.jsxs)("div",{children:[Object(y.jsx)(I.a,{inverted:!0,size:"medium",attached:"top",children:"Tournaments"}),Object(y.jsx)(d.a,{inverted:!0,attached:!0,padded:!0,children:Object(y.jsx)(Ae,{userData:r,centerItem:null,id:"tournamentChartId",itemLeft:{title:"Organized",value:r.tournaments_organized,color:"#00365F"},itemRight:{title:"Participated",value:r.total_tournaments_played,color:"#2D9CF1"}})})]})})]}),Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)(T.a.Row,{columns:"equal",children:Object(y.jsx)(T.a.Column,{children:Object(y.jsx)(I.a,{inverted:!0,size:"large",children:"Recent Games"})})}),Object(y.jsx)(T.a.Row,{columns:"equal",children:Object(y.jsxs)(T.a.Column,{children:[r.matches_played.map((function(t){return Object(y.jsxs)(d.a,{inverted:!0,floated:!0,style:{borderTop:"1px solid ".concat(t.winner?t.winner._id===e?"green":"red":"yellow"),margin:"5px 0px"},children:[Object(y.jsxs)(I.a,{style:{margin:0,padding:0},children:[t.player1.player?t.player1.player.username:"TBA"," ","vs"," ",t.player2.player?t.player2.player.username:"TBA"]}),Object(y.jsx)(U.a,{color:t.winner?t.winner._id===e?"green":"red":"yellow",attached:"top right",children:t.winner?t.winner._id===e?"WON":"LOST":"IN PROGRESS"})]})})),0===r.matches_played.length?Object(y.jsx)(d.a,{inverted:!0,floated:!0,style:{borderTop:"1px solid red",margin:"5px 0px"},children:Object(y.jsx)(I.a,{children:"No Matches Played"})}):null]})})]})]})]}):Object(y.jsx)(z.a,{children:Object(y.jsx)(I.a,{children:"Loading..."})})}var Le=function(e,t){switch(t.type){case"change_title":return Object(C.a)(Object(C.a)({},e),{},{title:t.payload});case"change_description":return Object(C.a)(Object(C.a)({},e),{},{description:t.payload});case"change_listed":return Object(C.a)(Object(C.a)({},e),{},{listed:t.payload});case"change_type":return Object(C.a)(Object(C.a)({},e),{},{type:t.payload});case"change_scoreTitle":return Object(C.a)(Object(C.a)({},e),{},{scoreTitle:t.payload});default:return e}};function Ee(){var e=Object(c.useReducer)(Le,{title:"",description:"",listed:!0,type:B,scoreTitle:""}),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useContext)(R).showToast,s={width:"100%",maxWidth:450},l={marginBottom:40},j=Object(o.f)(),b=function(e,t){r({type:t,payload:e.target.value})},O=function(){var e=Object(_.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.post("/create",n);case 3:t=e.sent,j.push("/tournament/".concat(t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i("error","Something went wrong, please try again later.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(z.a,{children:[Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsx)(I.a,{style:{color:"lightgrey"},as:"h2",children:Object(y.jsxs)(I.a.Content,{children:["Create Tournament",Object(y.jsx)(I.a.Subheader,{style:{color:"lightgrey"},children:"Create a new tournament"})]})})}),Object(y.jsxs)(d.a,{basic:!0,children:[Object(y.jsxs)("div",{style:l,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Title"})}),Object(y.jsx)(N.a,{onChange:function(e,t){r({type:"change_title",payload:t.value})},style:s,value:n.title,className:"settingInput"}),Object(y.jsx)("div",{className:"settingLabel"})]}),Object(y.jsxs)("div",{style:l,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Description"})}),Object(y.jsx)(je.a,{children:Object(y.jsx)(ue.a,{rows:5,value:n.description,placeholder:"Talk about rules, player respect, ethics...",onChange:function(e){b(e,"change_description")},className:"settingTextArea"})}),Object(y.jsx)("div",{className:"settingLabel",children:"here you can convey important information to the users wanting to join your tournament, talk about rules."})]}),Object(y.jsxs)("div",{style:l,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Type"})}),Object(y.jsx)(u.a,{className:"settingDropdown",style:s,placeholder:"Select Tournament Type",selection:!0,defaultValue:n.type,onChange:function(e,t){r({type:"change_type",payload:t.value})},options:[{key:F,value:F,text:F},{key:B,value:B,text:B}]}),Object(y.jsx)("div",{className:"settingLabel"})]}),Object(y.jsxs)(je.a,{inverted:!0,children:[n.type===F?Object(y.jsxs)("div",{style:l,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Leaderboard scoring field"})}),Object(y.jsx)(N.a,{value:n.scoreTitle,onChange:function(e){b(e,"change_scoreTitle")},style:s,className:"settingInput"}),Object(y.jsx)("div",{className:"settingLabel",children:"this is what each player is scored on, if the tournament is a speedrun this might be `time` or if its a free-for-all it might be `kills`"})]}):null,Object(y.jsxs)("div",{style:{marginBottom:15},children:[Object(y.jsx)(h.a,{positive:!0,onClick:O,primary:!0,children:"Update profile"}),Object(y.jsx)("div",{className:"settingLabel",children:"make the new tournament"})]})]})]})]})}var Me=["/login","/","/create/account"];function Pe(e,t){for(var n={},c=0,r=Object.entries(e);c<r.length;c++){var i=Object(a.a)(r[c],2),s=i[0],o=i[1];e[s]!==t[s]&&(n[s]=o)}return n}var De=function(e,t){switch(t.type){case"change_username":return Object(C.a)(Object(C.a)({},e),{},{username:t.payload});case"change_firstname":return Object(C.a)(Object(C.a)({},e),{},{firstname:t.payload});case"change_lastname":return Object(C.a)(Object(C.a)({},e),{},{lastname:t.payload});case"change_email":return Object(C.a)(Object(C.a)({},e),{},{email:t.payload});case"change_profile_pic":return Object(C.a)(Object(C.a)({},e),{},{profile_pic:t.payload});case"change_state":return t.payload;default:return e}};function We(){var e=Object(o.f)(),t=Object(c.useContext)(f),n=t.setUsername,r=t.user_id,i=Object(c.useContext)(R).showToast,s=Object(c.useContext)(L).windowHeight,l=Object(c.useState)(null),j=Object(a.a)(l,2),u=j[0],b=j[1],O=Object(c.useState)(!1),p=Object(a.a)(O,2),x=p[0],g=p[1],v=Object(c.useReducer)(De,{username:"",firstname:"",lastname:"",email:"",profile_pic:""}),k=Object(a.a)(v,2),T=k[0],A=k[1],E={width:"100%",maxWidth:450},M={marginBottom:40},P=function(){var t=Object(_.a)(S.a.mark((function t(){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),a=Pe(T,u),t.prev=2,t.next=5,m.patch("/user",a);case 5:g(!1),e.push("/u/".concat(r)),n(T.username),i("success","Profile updated."),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),i("error","Update failed, please try again later.");case 14:g(!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(_.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.get("/get/user");case 3:n=t.sent,b(n.data),A({type:"change_state",payload:n.data}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),i("error","User doesn't exist."),e.push("/home");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){D()}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:Object(le.a)({width:"100%",height:s/5,background:"rgb(10,67,149)"},"background","linear-gradient(90deg, rgba(10,67,149,1) 0%, rgba(0,255,89,1) 100%)")}),Object(y.jsxs)(z.a,{children:[Object(y.jsx)(w.a,{hidden:!0}),Object(y.jsx)(d.a,{basic:!0,children:Object(y.jsx)(I.a,{style:{color:"lightgrey"},as:"h2",children:Object(y.jsxs)(I.a.Content,{children:["User Settings",Object(y.jsx)(I.a.Subheader,{style:{color:"lightgrey"},children:"Manage your account settings"})]})})}),Object(y.jsxs)(d.a,{basic:!0,style:{marginLeft:0,marginRight:0},children:[Object(y.jsxs)("div",{style:M,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Username"})}),Object(y.jsx)(N.a,{onChange:function(e,t){A({type:"change_username",payload:t.value})},style:E,value:T.username,className:"settingInput"})]}),Object(y.jsxs)("div",{style:M,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Profile image"})}),Object(y.jsx)(W.a.Group,{children:q.map((function(e){return Object(y.jsx)(W.a,{style:Object(C.a)({},e===T.profile_pic?{border:"1px solid orange"}:{}),disabled:e!==T.profile_pic,onClick:function(){A({type:"change_profile_pic",payload:e})},src:e})}))})]}),Object(y.jsxs)("div",{style:M,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Personal Email"})}),Object(y.jsx)(N.a,{onChange:function(e,t){A({type:"change_email",payload:t.value})},style:E,value:T.email,className:"settingInput"}),Object(y.jsx)("div",{className:"settingLabel",children:"(not visible to other users)"})]}),Object(y.jsxs)("div",{style:M,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Firstname"})}),Object(y.jsx)(N.a,{onChange:function(e,t){A({type:"change_firstname",payload:t.value})},style:E,value:T.firstname,className:"settingInput"}),Object(y.jsx)("div",{className:"settingLabel",children:"(not visible to other users)"})]}),Object(y.jsxs)("div",{style:M,children:[Object(y.jsx)(I.a,{as:"h4",style:{color:"lightgrey"},children:Object(y.jsx)(I.a.Content,{children:"Lastname"})}),Object(y.jsx)(N.a,{onChange:function(e,t){A({type:"change_lastname",payload:t.value})},style:E,value:T.lastname,className:"settingInput"}),Object(y.jsx)("div",{className:"settingLabel",children:"(not visible to other users)"})]}),Object(y.jsxs)("div",{style:{marginBottom:15},children:[Object(y.jsx)(h.a,{onClick:P,primary:!0,loading:x,children:"Update profile"}),Object(y.jsx)("div",{className:"settingLabel",children:"update changes to profile"})]})]})]})]})}var He=[{routeName:"/u/:_id/edit",routerComponent:Object(y.jsx)(We,{})},{routeName:"/create/tournament",routerComponent:Object(y.jsx)(Ee,{})},{routeName:"/u/:_id",routerComponent:Object(y.jsx)(Re,{})},{routeName:"/tournament/:_id/:view?",routerComponent:Object(y.jsx)(Ie,{})},{routeName:"/create/account",routerComponent:Object(y.jsx)(oe,{})},{routeName:"/login",routerComponent:Object(y.jsx)(P,{})},{routeName:"/home",routerComponent:Object(y.jsx)($,{})},{routeName:"/",routerComponent:Object(y.jsx)(re,{})}];function Ue(){var e=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),s=Object(a.a)(i,2),l=s[0],d=s[1],j=Object(c.useState)(null),u=Object(a.a)(j,2),h=u[0],b=u[1],O=Object(c.useState)(null),x=Object(a.a)(O,2),g=x[0],f=x[1];return Object(o.f)(),[{UserLoggedIn:n,handleLogout:function(){m.defaults.headers.common["X-Authorization"]="",p.deleteStorage("@token"),d(null),b(null),f(null),r(!1)},handleUserLogin:function(e){m.defaults.headers.common["X-Authorization"]=e.token,p.setStorage("@token",e.token),d(e.token),b(e.username),f(e.user_id),r(!0)},setUsername:b,token:l,username:h,user_id:g,TOKEN_STORAGE_NAME:"@token"}]}(),t=Object(a.a)(e,1)[0],n=E(),r=Object(a.a)(n,1)[0],i=[Object(y.jsx)(A.a,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),{showToast:function(e,t){switch(e){case"info":A.b.info("\ud83d\udcdd "+t);break;case"success":A.b.success("\u2714\ufe0f "+t);break;case"warning":A.b.warning("\u26a0\ufe0f "+t);break;case"error":A.b.error("\ud83d\udea8 "+t);break;default:A.b.name("\ud83d\udca1 "+t)}}}],s=Object(a.a)(i,2),l=s[0],d=s[1];return function(e){e.UserLoggedIn;var t=e.handleLogout,n=e.handleUserLogin,a=(e.token,e.TOKEN_STORAGE_NAME),r=Object(o.f)(),i=Object(o.g)();Object(c.useEffect)((function(){s()}),[]);var s=function(){var e=Object(_.a)(S.a.mark((function e(){var c,s,o,l,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=p.getStorage(a))){e.next=15;break}return e.prev=2,e.next=5,m.request({method:"get",url:"/user",headers:{Accept:"application/json","X-Authorization":c}});case 5:s=e.sent,o=s.data,l=o.username,d=o.user_id,n({token:c,username:l,user_id:d}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t();case 13:e.next=18;break;case 15:if(Me.includes(i.pathname)){e.next=18;break}return r.push("/login"),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}()}(t),Object(y.jsx)(L.Provider,{value:r,children:Object(y.jsx)(R.Provider,{value:d,children:Object(y.jsxs)(f.Provider,{value:t,children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(v,{routes:He}),Object(y.jsx)("div",{children:Object(y.jsx)(o.c,{children:He.map((function(e){return Object(y.jsx)(o.a,{path:e.routeName,children:e.routerComponent})}))})})]}),["/","/login","/create/account"].includes(window.location.pathname)?null:Object(y.jsx)(w.a,{section:!0}),l]})})})}s.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(l.a,{basename:"/toffy",children:Object(y.jsx)(Ue,{})})}),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.95d21f7c.chunk.js.map